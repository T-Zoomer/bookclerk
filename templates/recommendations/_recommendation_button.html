<!-- Reusable Recommendation Button -->
<button 
    type="{{ button_type|default:'button' }}" 
    id="{{ button_id }}"
    class="bg-burgundy hover:-translate-y-1 text-cream font-serif font-bold py-3 md:py-4 px-6 md:px-8 rounded shadow-xl border-3 border-gold hover:shadow-2xl transition-all duration-200 flex items-center justify-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.95] {{ extra_classes }}"
    {% if show_loading %}onclick="showLoadingState('{{ button_id }}', '{{ loading_text|default:'Loading...' }}')"{% endif %}
>
    <div class="btn-content flex items-center justify-center space-x-3">
        {% if icon %}<span class="text-lg">{{ icon }}</span>{% endif %}
        <span class="text-lg md:text-xl">{{ button_text|default:'Submit' }}</span>
    </div>
</button>

{% if show_loading %}
<script>
function showLoadingState(buttonId, loadingText) {
    const submitBtn = document.getElementById(buttonId);
    
    if (submitBtn) {
        // Disable the button immediately
        submitBtn.disabled = true;
        submitBtn.classList.add('opacity-50');
        
        // Show the BookClerk loading screen
        if (typeof showBookClerkLoading === 'function') {
            showBookClerkLoading();
        }
        
        // If this is a form button, submit the form
        if (submitBtn.type === 'submit') {
            setTimeout(() => {
                submitBtn.closest('form').submit();
            }, 300); // Small delay to show the loading animation
        }
    }
}
</script>
{% endif %}
