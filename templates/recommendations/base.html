{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookClerk - AI Book Recommendations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'serif': ['Crimson Text', 'serif'],
                        'sans': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'parchment': '#f4f1e8',
                        'ink': '#2c1810',
                        'leather': '#8b4513',
                        'gold': '#d4af37',
                        'sage': '#9caf88',
                        'burgundy': '#722f37',
                        'burgundy-soft': '#a85b63',
                        'cream': '#faf7f0',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'page-turn': 'page-turn 0.6s ease-in-out',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        glow: {
                            '0%': { opacity: '0.5' },
                            '100%': { opacity: '1' },
                        },
                        'page-turn': {
                            '0%': { transform: 'rotateY(0deg)' },
                            '50%': { transform: 'rotateY(-15deg)' },
                            '100%': { transform: 'rotateY(0deg)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar styling */
        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-track {
            background: #f4f1e8;
            border-radius: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background: #8b4513;
            border-radius: 6px;
            border: 2px solid #f4f1e8;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #722f37;
        }
        
        /* Floating animation for book emojis */
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        
        /* Ink blot cursor effect */
        .ink-cursor {
            cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" fill="%23722f37"/></svg>'), auto;
        }
        
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
    </style>
</head>
<body class="bg-parchment min-h-screen font-sans">
    <!-- Decorative book spine border -->
    <div class="fixed left-0 top-0 w-2 h-full bg-leather z-10"></div>
    <div class="fixed left-2 top-0 w-1 h-full bg-gold opacity-60 z-10"></div>
    
    {% include 'recommendations/_header.html' %}

    <main class="container mx-auto px-6 py-12 relative">
        <!-- Subtle page texture -->
        <div class="absolute inset-0 opacity-5 pointer-events-none" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 40 40%22><g fill=%22%23000%22><circle cx=%2220%22 cy=%2220%22 r=%220.5%22 opacity=%220.1%22/></g></svg>');"></div>
        
        {% include 'recommendations/_messages.html' %}

        {% block content %}
        {% endblock %}
    </main>

    {% include 'recommendations/_footer.html' %}
    
    <script>
        function autoResize(textarea) {
            // Reset height to get accurate scrollHeight
            textarea.style.height = 'auto';
            
            // Calculate the line height
            const lineHeight = parseInt(window.getComputedStyle(textarea).lineHeight);
            const minRows = 2;
            const maxRows = 10;
            
            // Calculate required rows based on scroll height
            const rows = Math.min(maxRows, Math.max(minRows, Math.ceil(textarea.scrollHeight / lineHeight)));
            
            // Set the height
            textarea.style.height = (rows * lineHeight) + 'px';
        }
        
        // Examples functionality
        const examples = [
            "Books like Harry Potter.",
            "Best literary fiction from Russian authors.",
            "I enjoy literary fiction with unreliable narrators and beautiful prose, especially books that explore themes of memory and identity.",
            "Mystery novels set in small towns.",
            "I'm interested in non-fiction about psychology and human behavior, particularly books that explain cognitive biases and decision-making.",
            "Science fiction about space exploration.",
            "Romance books with strong female leads.",
            "I love fantasy novels with complex magic systems like Brandon Sanderson's works, and I'm also drawn to cozy mysteries set in small English villages.",
            "Non-fiction about personal development.",
            "I'm looking for science fiction that explores social issues and dystopian futures, similar to Margaret Atwood or Ursula K. Le Guin."
        ];
        
        let currentExampleIndex = Math.floor(Math.random() * examples.length);
        
        function updateExample() {
            const textarea = document.getElementById('preferences');
            if (textarea && textarea.value === '') {
                textarea.placeholder = examples[currentExampleIndex];
            }
        }
        
        function nextExample() {
            currentExampleIndex = (currentExampleIndex + 1) % examples.length;
            updateExample();
        }
        
        // Initialize examples and auto-rotation
        document.addEventListener('DOMContentLoaded', function() {
            updateExample();
            setInterval(nextExample, 4000); // Change example every 4 seconds
            
            // Clear auto-rotation when user starts typing
            const textarea = document.getElementById('preferences');
            if (textarea) {
                textarea.addEventListener('input', function() {
                    if (this.value !== '') {
                        this.placeholder = this.dataset.placeholder;
                    }
                });
                
                textarea.addEventListener('blur', function() {
                    if (this.value === '') {
                        updateExample();
                    }
                });
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            const textarea = document.getElementById('preferences');
            if (textarea) {
                autoResize(textarea);
            }
        });
    </script>
</body>
</html>
