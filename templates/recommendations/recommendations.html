{% extends 'recommendations/base.html' %}
{% load static %}

{% block content %}
    {% include 'recommendations/_recommendations_header.html' %}

    {% if recommendations %}
        <!-- Recommendations Grid -->
        <div class="space-y-6">
            {% for rec in recommendations %}
                <!-- Individual Recommendation Card -->
                <div class="w-full bg-cream rounded-lg border border-burgundy-soft overflow-hidden transition-all duration-300 group relative">
                    <!-- Bookmark Number - Desktop only -->
                    <div class="hidden md:block absolute -top-3 left-6 z-20">
                        <div class="bg-burgundy text-cream w-14 h-12 flex items-start justify-center pt-3 shadow-lg border-2 border-gold/40 relative">
                            <span class="text-xl md:text-2xl font-bold font-serif">{{ forloop.counter }}</span>
                            <!-- Bookmark bottom triangle -->
                            <div class="absolute bottom-0 left-0 w-0 h-0 border-l-7 border-r-7 border-t-4 border-l-transparent border-r-transparent border-t-burgundy transform translate-y-full"></div>
                        </div>
                    </div>
                    <!-- Vintage book texture -->
                    <div class="absolute inset-0 opacity-5 pointer-events-none" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2280%22 height=%2280%22 viewBox=%220 0 80 80%22><g fill=%22%238b4513%22><circle cx=%2220%22 cy=%2220%22 r=%221%22 opacity=%220.1%22/><circle cx=%2260%22 cy=%2260%22 r=%220.8%22 opacity=%220.15%22/></g></svg>');"></div>
                    
                    <!-- Book spine decoration -->
                    <div class="absolute left-0 top-0 w-2 h-full bg-leather"></div>
                    <div class="absolute left-2 top-0 w-px h-full bg-gold/60"></div>
                    
                    <div class="p-3 md:p-4 ml-2 md:ml-4 pt-6 md:pt-12 relative z-10 flex flex-col h-full">
                        <div class="flex flex-col space-y-1 md:space-y-4 flex-grow">
                            <!-- Book Title & Author -->
                            <div class="text-left">
                                <h3 class="text-xl md:text-3xl font-serif font-bold text-ink mb-1 leading-tight">
                                    <span class="md:hidden">{{ forloop.counter }}. </span>{{ rec.title }}
                                </h3>
                                <div class="flex items-center justify-start space-x-2 text-leather">
                                    <p class="text-lg md:text-2xl font-serif italic">by {{ rec.author }}</p>
                                </div>
                            </div>
                                
                                <!-- Description -->
                                <div class="mb-3">
                                    <p class="text-base md:text-lg text-ink leading-relaxed font-serif">{{ rec.description }}</p>
                                </div>
                                
                                <!-- Recommendation Reason -->
                                <div class="bg-parchment rounded border-2 border-gold shadow-md p-3 mb-4 relative">
                                    <h4 class="text-base md:text-lg font-serif font-semibold text-leather mb-1">Why BookClerk recommends this:</h4>
                                    <p class="text-base md:text-lg text-ink font-serif leading-relaxed">"{{ rec.reason }}"</p>
                                </div>
                                
                        </div>
                        
                        <!-- Amazon Link - Always at bottom -->
                        {% if rec.amazon_url %}
                        <div class="flex justify-center md:justify-end mt-auto pt-4">
                            <a href="{{ rec.amazon_url }}" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="bg-burgundy hover:-translate-y-1 text-cream px-4 md:px-6 py-2 md:py-3 rounded text-base md:text-lg font-serif font-bold transition-all duration-200 flex items-center space-x-2 shadow-xl border-3 border-gold hover:shadow-2xl active:scale-[0.95]">
                                <span>View Book</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        {% include 'recommendations/_no_recommendations.html' %}
    {% endif %}
{% endblock %}
