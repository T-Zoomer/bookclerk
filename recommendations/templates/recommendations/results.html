{% extends 'recommendations/base.html' %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <!-- Header Section -->
    <div class="bg-cream rounded-xl shadow-2xl border border-gold/20 p-8 mb-10 relative overflow-hidden">
        <!-- Paper texture overlay -->
        <div class="absolute inset-0 opacity-5 pointer-events-none" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 40 40%22><g fill=%22%238b4513%22><circle cx=%2210%22 cy=%2210%22 r=%220.5%22 opacity=%220.2%22/><circle cx=%2230%22 cy=%2230%22 r=%220.3%22 opacity=%220.1%22/></g></svg>');"></div>
        
        <!-- Decorative corners -->
        <div class="absolute top-3 left-3 w-8 h-8 border-l-2 border-t-2 border-gold/50"></div>
        <div class="absolute top-3 right-3 w-8 h-8 border-r-2 border-t-2 border-gold/50"></div>
        <div class="absolute bottom-3 left-3 w-8 h-8 border-l-2 border-b-2 border-gold/50"></div>
        <div class="absolute bottom-3 right-3 w-8 h-8 border-r-2 border-b-2 border-gold/50"></div>
        
        <div class="relative z-10">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-4">
                    <div class="text-3xl">üìö</div>
                    <h2 class="text-3xl font-serif font-semibold text-ink">BookClerk's Recommendations</h2>
                </div>
                <a href="{% url 'home' %}" class="bg-gradient-to-r from-burgundy to-leather hover:from-leather hover:to-burgundy text-cream px-6 py-3 rounded-lg shadow-lg transition-all duration-300 transform hover:scale-105 font-serif flex items-center space-x-2">
                    <span>‚ú®</span>
                    <span>New Request</span>
                </a>
            </div>
            
            <!-- Preferences Display -->
            <div class="bg-parchment/60 rounded-lg border border-gold/30 p-6 relative">
                <div class="absolute top-2 left-2 text-gold/40 text-lg">‚ùù</div>
                <div class="absolute bottom-2 right-2 text-gold/40 text-lg">‚ùû</div>
                
                <h3 class="font-serif font-semibold text-leather mb-3 flex items-center space-x-2">
                    <span>üéØ</span>
                    <span>Based on your preferences:</span>
                </h3>
                <p class="text-ink font-serif text-lg italic leading-relaxed pl-6">"{{ request.user_preferences }}"</p>
                <div class="flex items-center justify-center mt-4 space-x-2 text-xs text-leather/60">
                    <span>üìÖ</span>
                    <span class="font-serif">Generated on {{ request.created_at|date:"F d, Y" }} at {{ request.created_at|date:"H:i" }}</span>
                </div>
            </div>
        </div>
    </div>

    {% if recommendations %}
        <!-- Recommendations Grid -->
        <div class="space-y-8">
            {% for rec in recommendations %}
            <div class="bg-cream rounded-xl shadow-xl border border-gold/30 overflow-hidden hover:shadow-2xl transition-all duration-300 group relative">
                <!-- Vintage book texture -->
                <div class="absolute inset-0 opacity-5 pointer-events-none" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2280%22 height=%2280%22 viewBox=%220 0 80 80%22><g fill=%22%238b4513%22><circle cx=%2220%22 cy=%2220%22 r=%221%22 opacity=%220.1%22/><circle cx=%2260%22 cy=%2260%22 r=%220.8%22 opacity=%220.15%22/></g></svg>');"></div>
                
                <!-- Book spine decoration -->
                <div class="absolute left-0 top-0 w-2 h-full bg-gradient-to-b from-leather via-burgundy to-leather"></div>
                <div class="absolute left-2 top-0 w-px h-full bg-gold/60"></div>
                
                <div class="p-8 ml-4 relative z-10">
                    <div class="flex items-start space-x-6">
                        <!-- Book Number Badge -->
                        <div class="flex-shrink-0">
                            <div class="w-16 h-16 bg-gradient-to-br from-burgundy to-leather rounded-full flex items-center justify-center shadow-lg border-2 border-gold/40 group-hover:scale-110 transition-transform duration-300">
                                <span class="text-cream font-bold text-xl font-serif">{{ forloop.counter }}</span>
                            </div>
                        </div>
                        
                        <div class="flex-1">
                            <!-- Book Title & Author -->
                            <div class="mb-6">
                                <h3 class="text-2xl font-serif font-bold text-ink mb-2 leading-tight">{{ rec.title }}</h3>
                                <div class="flex items-center space-x-2 text-leather">
                                    <span class="text-lg">‚úíÔ∏è</span>
                                    <p class="text-lg font-serif italic">by {{ rec.author }}</p>
                                </div>
                            </div>
                            
                            <!-- Description -->
                            <div class="mb-6">
                                <h4 class="font-serif font-semibold text-ink mb-3 flex items-center space-x-2">
                                    <span>üìñ</span>
                                    <span>Description:</span>
                                </h4>
                                <div class="bg-parchment/60 rounded-lg p-4 border-l-4 border-gold/50">
                                    <p class="text-ink leading-relaxed font-serif">{{ rec.description }}</p>
                                </div>
                            </div>
                            
                            <!-- Recommendation Reason -->
                            <div class="bg-sage/20 rounded-lg border border-sage/30 p-5 mb-6 relative">
                                <div class="absolute top-2 left-2 text-sage text-lg">üí°</div>
                                <h4 class="font-serif font-semibold text-sage mb-3 pl-6">Why BookClerk recommends this:</h4>
                                <p class="text-ink font-serif italic pl-6 leading-relaxed">"{{ rec.reason }}"</p>
                            </div>
                            
                            <!-- Amazon Link -->
                            {% if rec.amazon_url %}
                            <div class="bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200 p-5 group/amazon hover:shadow-md transition-shadow duration-200">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                                            <svg class="w-5 h-5 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <span class="font-serif font-semibold text-orange-800">Available on Amazon</span>
                                            <p class="text-orange-600 text-sm font-serif">Ready for purchase</p>
                                        </div>
                                    </div>
                                    <a href="{{ rec.amazon_url }}" 
                                       target="_blank" 
                                       rel="noopener noreferrer"
                                       class="bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white px-6 py-3 rounded-lg font-serif font-medium transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center space-x-2">
                                        <span>üìö</span>
                                        <span>Buy on Amazon</span>
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <!-- No Recommendations State -->
        <div class="bg-cream rounded-xl shadow-xl border border-gold/30 p-12 text-center relative overflow-hidden">
            <!-- Decorative elements -->
            <div class="absolute top-6 left-6 w-8 h-8 border-l-2 border-t-2 border-gold/40"></div>
            <div class="absolute top-6 right-6 w-8 h-8 border-r-2 border-t-2 border-gold/40"></div>
            <div class="absolute bottom-6 left-6 w-8 h-8 border-l-2 border-b-2 border-gold/40"></div>
            <div class="absolute bottom-6 right-6 w-8 h-8 border-r-2 border-b-2 border-gold/40"></div>
            
            <div class="relative z-10">
                <div class="text-leather/40 mb-6 text-6xl">üìö</div>
                <h3 class="text-2xl font-serif font-semibold text-ink mb-4">No Recommendations Found</h3>
                <p class="text-leather font-serif text-lg mb-6 max-w-md mx-auto leading-relaxed">
                    BookClerk couldn't generate recommendations for your request. 
                    Try being more specific about your preferences.
                </p>
                
                <div class="flex justify-center items-center space-x-4 mb-8">
                    <span class="w-12 h-px bg-gold/40"></span>
                    <span class="text-gold text-2xl">‚ú®</span>
                    <span class="w-12 h-px bg-gold/40"></span>
                </div>
                
                <a href="{% url 'home' %}" class="inline-flex items-center space-x-3 bg-gradient-to-r from-burgundy to-leather hover:from-leather hover:to-burgundy text-cream px-8 py-4 rounded-lg shadow-lg transition-all duration-300 transform hover:scale-105 font-serif text-lg font-medium">
                    <span>üîç</span>
                    <span>Try Again</span>
                    <span>üìñ</span>
                </a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}